<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test Oakline Bank createAccount</title>
</head>
<body>
<h1>Test Oakline Bank createAccount</h1>

<label>First Name: <input id="first_name" value="John"></label><br>
<label>Middle Name: <input id="middle_name" value="M"></label><br>
<label>Last Name: <input id="last_name" value="Doe"></label><br>
<label>DOB: <input id="dob" value="1990-01-01" type="date"></label><br>
<label>Phone: <input id="phone" value="555-123-4567"></label><br>
<label>Email: <input id="email" value="john.doe@example.com" type="email"></label><br>
<label>Address: <input id="address" value="123 Main St"></label><br>
<label>City: <input id="city" value="SomeCity"></label><br>
<label>State: <input id="state" value="CA"></label><br>
<label>Postal Code: <input id="postal_code" value="90001"></label><br>
<label>SSN: <input id="ssn" value="123-45-6789"></label><br>
<label>Account Types (comma separated): <input id="account_types" value="Savings,Checking"></label><br><br>

<button id="testBtn">Create Account</button>

<pre id="responseOutput" style="background:#f0f0f0; padding:10px; margin-top:20px;"></pre>

<script>
document.getElementById('testBtn').addEventListener('click', async () => {
  const output = document.getElementById('responseOutput');
  output.textContent = 'Sending request...';

  const accountTypes = document.getElementById('account_types').value
    .split(',')
    .map(a => a.trim());

  const body = {
    first_name: document.getElementById('first_name').value,
    middle_name: document.getElementById('middle_name').value,
    last_name: document.getElementById('last_name').value,
    dob: document.getElementById('dob').value,
    phone: document.getElementById('phone').value,
    email: document.getElementById('email').value,
    address: document.getElementById('address').value,
    city: document.getElementById('city').value,
    state: document.getElementById('state').value,
    postal_code: document.getElementById('postal_code').value,
    ssn: document.getElementById('ssn').value,
    account_types: accountTypes
  };

  try {
    const response = await fetch(
      'https://arvuoabjhqdkxhsswybx.supabase.co/functions/v1/createAccount',
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(body)
      }
    );

    const data = await response.json();
    output.textContent = JSON.stringify(data, null, 2);
  } catch (err) {
    output.textContent = 'Error: ' + err;
  }
});
</script>
</body>
</html>
