<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Forgot Password | Oakline Bank</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
</head>
<body class="bg-light">
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow">
          <div class="card-header bg-warning text-dark text-center">
            <h3>Forgot Password?</h3>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <label for="email" class="form-label">Enter your registered email</label>
              <input type="email" id="email" class="form-control" placeholder="your-email@example.com" />
            </div>
            <button class="btn btn-warning w-100" id="resetBtn">Send Reset Email</button>
            <div id="messageBox" class="mt-3 text-center"></div>
          </div>
          <div class="card-footer text-center">
            <a href="login.html">Back to Login</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Your Firebase config here (replace with your actual config)
    const firebaseConfig = {
      apiKey: "AIzaSyAr4WIWv-sCc96kABTZuzlw67NiwnqTLfo",
      authDomain: "oakline-bank.firebaseapp.com",
      projectId: "oakline-bank",
      storageBucket: "oakline-bank.firebasestorage.app",
      messagingSenderId: "199506974383",
      appId: "1:199506974383:web:3932cbd6bb2b0305b8265a",
      measurementId: "G-XXRQF2N3XB"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const resetBtn = document.getElementById('resetBtn');
    const emailInput = document.getElementById('email');
    const messageBox = document.getElementById('messageBox');

    resetBtn.addEventListener('click', () => {
      const email = emailInput.value.trim();

      messageBox.textContent = '';
      messageBox.className = '';

      if (!email) {
        showMessage('Please enter your email.', 'text-danger');
        return;
      }

      auth.sendPasswordResetEmail(email)
        .then(() => {
          showMessage('âœ… Password reset email sent! Check your inbox.', 'text-success');
        })
        .catch(error => {
          let errorMsg = 'An error occurred. Please try again.';
          if (error.code === 'auth/user-not-found') {
            errorMsg = 'Email not found. Please check and try again.';
          } else if (error.code === 'auth/invalid-email') {
            errorMsg = 'Invalid email address.';
          }
          showMessage(errorMsg, 'text-danger');
        });
    });

    function showMessage(message, className) {
      messageBox.textContent = message;
      messageBox.className = `mt-3 text-center ${className}`;
    }
  </script>
</body>
</html>
