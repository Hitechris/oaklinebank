<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Oakline Bank - Sign Up</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f4f6f9;
      font-family: 'Segoe UI', sans-serif;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .signup-container {
      background: white;
      padding: 2rem 2.5rem;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 450px;
    }
    .signup-header {
      margin-bottom: 1.5rem;
      text-align: center;
      color: #004080;
      font-weight: 700;
      font-size: 1.75rem;
    }
    #signupMessage {
      min-height: 1.5rem;
      margin-bottom: 1rem;
      text-align: center;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="signup-container">
    <div class="signup-header">Create Your Oakline Bank Account</div>
    <form id="signupForm" novalidate>
      <div class="mb-3">
        <label for="fullName" class="form-label">Full Name *</label>
        <input type="text" class="form-control" id="fullName" placeholder="John Doe" required />
      </div>

      <div class="mb-3">
        <label for="username" class="form-label">Username *</label>
        <input type="text" class="form-control" id="username" placeholder="Choose a username" required minlength="3" />
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">Email Address *</label>
        <input type="email" class="form-control" id="email" placeholder="you@example.com" required />
      </div>

      <div class="mb-3">
        <label for="phone" class="form-label">Phone Number (Optional)</label>
        <input type="tel" class="form-control" id="phone" placeholder="(123) 456-7890" pattern="^\+?[\d\s\-()]{7,15}$" />
      </div>

      <div class="mb-3">
        <label for="password" class="form-label">Password *</label>
        <input type="password" class="form-control" id="password" placeholder="At least 6 characters" required minlength="6" />
      </div>

      <div class="mb-3">
        <label for="confirmPassword" class="form-label">Confirm Password *</label>
        <input type="password" class="form-control" id="confirmPassword" placeholder="Re-enter your password" required minlength="6" />
      </div>

      <div class="form-check mb-3">
        <input type="checkbox" class="form-check-input" id="terms" required />
        <label class="form-check-label" for="terms">
          I agree to the <a href="terms.html" target="_blank">Terms & Conditions</a> *
        </label>
      </div>

      <div id="signupMessage" role="alert" aria-live="polite"></div>

      <button type="submit" class="btn btn-primary w-100">Sign Up</button>

      <div class="mt-3 text-center">
        Already have an account? <a href="login.html">Log in here</a>.
      </div>
    </form>
  </div>

<script>
  function validateEmail(email) {
    // Simple regex for email validation
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }

  function loadUsers() {
    const raw = localStorage.getItem("oakline_users");
    if (!raw) return [];
    try {
      return JSON.parse(raw);
    } catch {
      return [];
    }
  }

  function saveUsers(users) {
    localStorage.setItem("oakline_users", JSON.stringify(users));
  }

  document.getElementById("signupForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const fullName = document.getElementById("fullName").value.trim();
    const username = document.getElementById("username").value.trim();
    const email = document.getElementById("email").value.trim().toLowerCase();
    const phone = document.getElementById("phone").value.trim();
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirmPassword").value;
    const termsChecked = document.getElementById("terms").checked;

    const messageEl = document.getElementById("signupMessage");
    messageEl.style.color = "red";

    // Basic validations
    if (!fullName || !username || !email || !password || !confirmPassword) {
      messageEl.textContent = "Please fill out all required fields.";
      return;
    }

    if (username.length < 3) {
      messageEl.textContent = "Username must be at least 3 characters.";
      return;
    }

    if (!validateEmail(email)) {
      messageEl.textContent = "Please enter a valid email address.";
      return;
    }

    if (password.length < 6) {
      messageEl.textContent = "Password must be at least 6 characters.";
      return;
    }

    if (password !== confirmPassword) {
      messageEl.textContent = "Passwords do not match.";
      return;
    }

    if (!termsChecked) {
      messageEl.textContent = "You must agree to the Terms & Conditions.";
      return;
    }

    // Validate phone pattern if provided
    if (phone && !/^\+?[\d\s\-()]{7,15}$/.test(phone)) {
      messageEl.textContent = "Please enter a valid phone number or leave it empty.";
      return;
    }

    // Load users and check duplicates
    const users = loadUsers();

    if (users.some(u => u.username.toLowerCase() === username.toLowerCase())) {
      messageEl.textContent = "Username already taken. Please choose another.";
      return;
    }

    if (users.some(u => u.email.toLowerCase() === email.toLowerCase())) {
      messageEl.textContent = "Email already registered. Please log in or use another.";
      return;
    }

    // Save new user
    const newUser = {
      fullName,
      username,
      email,
      phone,
      password // Plain text for demo â€” consider hashing in production
    };

    users.push(newUser);
    saveUsers(users);

    messageEl.style.color = "green";
    messageEl.textContent = "Registration successful! Redirecting to login...";

    setTimeout(() => {
      window.location.href = "login.html";
    }, 1500);
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
